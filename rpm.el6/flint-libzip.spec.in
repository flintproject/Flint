Summary: libzip for Flint
Name: flint-libzip
Version: libzip_VERSION
Release: libzip_RELEASE%{?dist}
License: BSD-3-clause
URL: http://www.nih.at/libzip/
Source0: %{name}-%{version}.tar.gz
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
BuildRequires: gcc
BuildRequires: make
BuildRequires: zlib-devel >= 1.2.3
Requires: zlib >= 1.2.3

%description
This is a libzip package for Flint.

%prep
%setup -q

%build
./configure --prefix=/opt/flint --enable-silent-rules
make

%install
rm -rf %{buildroot}
make install DESTDIR=%{buildroot}
mkdir -p %{buildroot}/etc/ld.so.conf.d
echo '/opt/flint/lib' > %{buildroot}/etc/ld.so.conf.d/%{name}.conf

%clean
rm -rf %{buildroot}

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

%files
%defattr(-,root,root,-)
%doc
/etc/ld.so.conf.d/%{name}.conf
/opt/flint/bin/zipcmp
/opt/flint/bin/zipmerge
/opt/flint/bin/ziptool
/opt/flint/include/zip.h
/opt/flint/lib/libzip.a
/opt/flint/lib/libzip.la
/opt/flint/lib/libzip.so
/opt/flint/lib/libzip.so.4
/opt/flint/lib/libzip.so.4.0.0
/opt/flint/lib/libzip/include/zipconf.h
/opt/flint/share/man/man1/zipcmp.1
/opt/flint/share/man/man1/zipmerge.1
/opt/flint/share/man/man1/ziptool.1
/opt/flint/share/man/man3/libzip.3
/opt/flint/share/man/man3/ZIP_SOURCE_GET_ARGS.3
/opt/flint/share/man/man3/zip_*
/opt/flint/lib/pkgconfig/libzip.pc

%changelog
